<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Clan Voting System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 0;
            box-sizing: border-box;
        }
        h1, h2 {
            color: #333;
        }
        fieldset {
            margin-bottom: 20px;
        }
        button {
            padding: 10px 15px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #218838;
        }
        .admin-section, #voteForm {
            margin-top: 20px;
        }
        .hidden {
            display: none;
        }
    </style>
    <!-- Firebase Configuration -->
    <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-database.js"></script>
</head>
<body>

<h1>Family Clan Leadership Voting</h1>

<div id="voteForm">
    <form id="votingForm">
        <!-- Chairperson Vote -->
        <fieldset>
            <legend>Chairperson:</legend>
            <input type="radio" name="chairperson" value="Mr. F Gwejula" required> Mr. F Gwejula<br>
            <input type="radio" name="chairperson" value="Mrs. R Kaliwata"> Mrs. R Kaliwata<br>
            <input type="radio" name="chairperson" value="Mr. K Chakwanira"> Mr. K Chakwanira
        </fieldset>

        <!-- Secretary Vote -->
        <fieldset>
            <legend>Secretary:</legend>
            <input type="radio" name="secretary" value="Mrs. J Joaki" required> Mrs. J Joaki<br>
            <input type="radio" name="secretary" value="Ms. C Gwejula"> Ms. C Gwejula<br>
            <input type="radio" name="secretary" value="Mrs. M Ngozo"> Mrs. M Ngozo
        </fieldset>

        <!-- Treasurer Vote -->
        <fieldset>
            <legend>Treasurer:</legend>
            <input type="radio" name="treasurer" value="Ms. D Chakwanira" required> Ms. D Chakwanira<br>
            <input type="radio" name="treasurer" value="Mrs. J Jose"> Mrs. J Jose<br>
            <input type="radio" name="treasurer" value="Mrs. E Ndhlovu"> Mrs. E Ndhlovu
        </fieldset>

        <!-- Entertainment/Welfare Vote -->
        <fieldset>
            <legend>Entertainment/Welfare:</legend>
            <input type="checkbox" name="entertainment" value="Mr. TO Mkambeni"> Mr. TO Mkambeni<br>
            <input type="checkbox" name="entertainment" value="Ms. N Jumbe"> Ms. N Jumbe<br>
            <input type="checkbox" name="entertainment" value="Ms. M Gwejula"> Ms. M Gwejula<br>
            <input type="checkbox" name="entertainment" value="Mr. M Ndhlovu"> Mr. M Ndhlovu<br>
            <input type="checkbox" name="entertainment" value="Mrs. S Nkhuwa"> Mrs. S Nkhuwa<br>
            <input type="checkbox" name="entertainment" value="Mr. D Kaliwata"> Mr. D Kaliwata<br>
            <input type="checkbox" name="entertainment" value="Ms. F Jumbe"> Ms. F Jumbe
        </fieldset>

        <button type="submit">Submit Vote</button>
    </form>
</div>

<div id="results" class="hidden">
    <h2>Thank you for voting!</h2>
</div>

<div class="admin-section">
    <h2>Admin Section</h2>
    <button id="adminLoginButton">Admin Access</button>
    <div id="adminResults" class="hidden">
        <h3>Voting Results:</h3>
        <pre id="adminVotes"></pre>
    </div>
</div>

<script>
    // Firebase configuration
     // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyCH03QLcJGqfHbziZFwSvgc5lecMa0Vt9c",
  authDomain: "clan-a2f08.firebaseapp.com",
  databaseURL: "https://clan-a2f08-default-rtdb.firebaseio.com",
  projectId: "clan-a2f08",
  storageBucket: "clan-a2f08.appspot.com",
  messagingSenderId: "181988994542",
  appId: "1:181988994542:web:9956d52af3492e1724f2ff",
  measurementId: "G-Z6NNTBK9DC"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Vote Submission Handler
    document.getElementById('votingForm').addEventListener('submit', function (event) {
        event.preventDefault();

        const voteData = {
            chairperson: document.querySelector('input[name="chairperson"]:checked').value,
            secretary: document.querySelector('input[name="secretary"]:checked').value,
            treasurer: document.querySelector('input[name="treasurer"]:checked').value,
            entertainment: []
        };

        // Get entertainment votes
        document.querySelectorAll('input[name="entertainment"]:checked').forEach(box => voteData.entertainment.push(box.value));

        // Save votes to Firebase
        db.ref('votes').push(voteData);

        // Hide form and show results
        document.getElementById('voteForm').classList.add('hidden');
        document.getElementById('results').classList.remove('hidden');
    });

    // Admin Access and View Votes
    document.getElementById('adminLoginButton').addEventListener('click', function () {
        const password = prompt('Enter admin password:');
        if (password === 'Jumbe1212') {
            revealVotes();
        } else {
            alert('Incorrect password');
        }
    });

    function revealVotes() {
        db.ref('votes').once('value', function(snapshot) {
            const votes = snapshot.val();
            document.getElementById('adminVotes').textContent = JSON.stringify(votes, null, 2);
            document.getElementById('adminResults').classList.remove('hidden');
        });
    }

    // Close voting after 12 hours
    setTimeout(() => {
        document.getElementById('votingForm').classList.add('hidden');
        document.getElementById('results').classList.remove('hidden');
        document.getElementById('results').innerHTML = "<h2>Voting has ended.</h2>";
    }, 12 * 60 * 60 * 1000); // 12 hours in milliseconds
</script>

</body>
</html>
